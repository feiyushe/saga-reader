{
  "data": {
    "code_dossier": {
      "name": "tray.rs",
      "file_path": "app/src-tauri/src/tray.rs",
      "code_purpose": "widget",
      "importance_score": 0.8,
      "description": "系统托盘图标管理组件，负责创建和管理桌面应用的托盘菜单及窗口控制逻辑。",
      "functions": [
        "create_tray",
        "open_main_window",
        "bring_to_front"
      ],
      "interfaces": []
    },
    "detailed_description": "该组件实现了Tauri桌面应用的系统托盘功能。主要功能包括：创建带有自定义菜单项的托盘图标（显示主窗口、网络信息、关于、退出程序），处理菜单点击事件以打开或聚焦不同类型的窗口（主窗口、外部端点信息窗口、关于窗口），并通过双击托盘图标快速打开主窗口。组件使用了条件编译来适配macOS平台的菜单点击行为差异。所有窗口配置（标签、标题、URL等）通过常量模块注入，增强了可维护性。",
    "responsibilities": [
      "创建并初始化系统托盘图标及其上下文菜单",
      "响应托盘菜单项的点击事件以控制应用程序窗口",
      "管理多个Webview窗口的打开与聚焦行为",
      "实现跨平台兼容的托盘交互逻辑（特别是macOS左键点击菜单支持）",
      "封装窗口焦点恢复的通用操作"
    ],
    "interfaces": [
      {
        "name": "create_tray",
        "interface_type": "function",
        "visibility": "public",
        "parameters": [
          {
            "name": "app",
            "param_type": "tauri::AppHandle<R>",
            "is_optional": false,
            "description": "Tauri应用句柄引用"
          }
        ],
        "return_type": "tauri::Result<()>",
        "description": "创建系统托盘并注册事件处理器"
      },
      {
        "name": "open_main_window",
        "interface_type": "function",
        "visibility": "public",
        "parameters": [
          {
            "name": "app",
            "param_type": "tauri::AppHandle<R>",
            "is_optional": false,
            "description": "Tauri应用句柄引用"
          }
        ],
        "return_type": null,
        "description": "打开或聚焦主窗口"
      },
      {
        "name": "bring_to_front",
        "interface_type": "function",
        "visibility": "private",
        "parameters": [
          {
            "name": "window",
            "param_type": "WebviewWindow<R>",
            "is_optional": false,
            "description": "要前置的Webview窗口实例"
          }
        ],
        "return_type": null,
        "description": "将指定窗口恢复到前台显示"
      }
    ],
    "dependencies": [
      {
        "name": "tauri",
        "path": null,
        "is_external": true,
        "line_number": 1,
        "dependency_type": "library",
        "version": null
      },
      {
        "name": "crate::constrant",
        "path": "app/src-tauri/src/constrant.rs",
        "is_external": false,
        "line_number": 9,
        "dependency_type": "module",
        "version": null
      }
    ],
    "complexity_metrics": {
      "cyclomatic_complexity": 8.0,
      "lines_of_code": 119,
      "number_of_functions": 3,
      "number_of_classes": 0,
      "depth_of_inheritance": 0,
      "coupling_factor": 2.0,
      "cohesion_score": 0.85
    }
  },
  "timestamp": 1758805667,
  "prompt_hash": "96d870b1a6b442d8bb70d367b08083e0",
  "token_usage": {
    "input_tokens": 1524,
    "output_tokens": 869,
    "total_tokens": 2393
  },
  "model_name": null
}