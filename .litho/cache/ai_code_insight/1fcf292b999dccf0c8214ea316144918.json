{
  "data": {
    "code_dossier": {
      "name": "index.svelte.ts",
      "file_path": "app/src/routes/main/stores/index.svelte.ts",
      "code_purpose": "controller",
      "importance_score": 1.0,
      "description": "核心状态管理控制器，协调文章、任务、信息源等子模块的状态与行为",
      "functions": [
        "createStore",
        "setCurrentArticle",
        "getCurrentArticle",
        "scheduleUpdate",
        "onSelectToday",
        "onSelectWeekend",
        "onSelectFavorite",
        "onSelectUnread",
        "setCurrentFeedId"
      ],
      "interfaces": [
        "IContext"
      ]
    },
    "detailed_description": "该组件是Svelte应用中的核心状态容器，通过`createStore`函数创建一个全局共享的状态管理实例。它整合了feeds、articles、tasks、reader和sprite等多个子store，并对外暴露统一的访问接口。组件负责维护当前选中的feed和文章状态，提供feed切换、内容更新调度、文章获取等关键功能。特别地，通过$effect实现了启动时的自动初始化逻辑：刷新feeds并默认选中今日feed，根据最新文章日期决定是否触发全量更新。组件广泛使用Svelte的反应式语法($state, $derived, $effect)，体现了典型的响应式编程模式。",
    "responsibilities": [
      "作为主页面的核心状态管理中枢，协调多个子状态模块（feeds/articles/tasks等）",
      "维护当前选中的信息源(Feed)和文章(Article)的全局状态",
      "提供信息源切换、内容更新调度、文章读取等核心业务操作接口",
      "实现应用启动时的自动初始化与数据预加载逻辑",
      "处理跨模块的状态同步与依赖注入（通过context机制）"
    ],
    "interfaces": [
      {
        "name": "IContext",
        "interface_type": "type",
        "visibility": "imported",
        "parameters": [],
        "return_type": null,
        "description": "定义了上下文对象的结构，包含currentArticle和currentFeedId两个只读属性"
      }
    ],
    "dependencies": [
      {
        "name": "Article",
        "path": "$lib/types/article",
        "is_external": false,
        "line_number": 1,
        "dependency_type": "type",
        "version": null
      },
      {
        "name": "featuresApi",
        "path": "$lib/hybrid-apis/feed/impl",
        "is_external": false,
        "line_number": 3,
        "dependency_type": "variable",
        "version": null
      },
      {
        "name": "isRecentFamilyFeed",
        "path": "$lib/hybrid-apis/feed/impl",
        "is_external": false,
        "line_number": 4,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "isSpecifyFeed",
        "path": "$lib/hybrid-apis/feed/impl",
        "is_external": false,
        "line_number": 5,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "SPECIFY_FEED_IDSET",
        "path": "$lib/hybrid-apis/feed/impl",
        "is_external": false,
        "line_number": 6,
        "dependency_type": "constant",
        "version": null
      },
      {
        "name": "createArticles",
        "path": "./articles/index.svelte",
        "is_external": false,
        "line_number": 7,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "createTasks",
        "path": "./tasks.svelte",
        "is_external": false,
        "line_number": 8,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "createFeeds",
        "path": "./feeds.svelte",
        "is_external": false,
        "line_number": 9,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "createReader",
        "path": "./reader.svelte",
        "is_external": false,
        "line_number": 10,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "createSprite",
        "path": "./sprite.svelte",
        "is_external": false,
        "line_number": 11,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "currentDateText",
        "path": "$lib/utils/date",
        "is_external": false,
        "line_number": 12,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "IContext",
        "path": "./context",
        "is_external": false,
        "line_number": 13,
        "dependency_type": "type",
        "version": null
      }
    ],
    "complexity_metrics": {
      "cyclomatic_complexity": 14.0,
      "lines_of_code": 203,
      "number_of_functions": 14,
      "number_of_classes": 0,
      "depth_of_inheritance": 0,
      "coupling_factor": 0.68,
      "cohesion_score": 0.82
    }
  },
  "timestamp": 1758801026,
  "prompt_hash": "1fcf292b999dccf0c8214ea316144918",
  "token_usage": {
    "input_tokens": 1813,
    "output_tokens": 1118,
    "total_tokens": 2931
  },
  "model_name": null
}