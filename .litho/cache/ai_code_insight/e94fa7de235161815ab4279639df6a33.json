{
  "data": {
    "code_dossier": {
      "name": "index.svelte.ts",
      "file_path": "app/src/routes/main/stores/index.svelte.ts",
      "source_summary": "",
      "code_purpose": "controller",
      "importance_score": 1.0,
      "description": "核心状态管理容器，协调文章、任务、订阅源等子模块的状态与行为。",
      "functions": [
        "createStore",
        "setCurrentArticle",
        "getCurrentArticle",
        "scheduleUpdate",
        "onSelectToday",
        "onSelectWeekend",
        "onSelectFavorite",
        "onSelectUnread",
        "setCurrentFeedId"
      ],
      "interfaces": [
        "IContext"
      ]
    },
    "detailed_description": "该组件是Svelte应用中的核心状态存储模块，通过`createStore`函数创建一个集中式的状态管理器。它整合了feeds、articles、tasks、reader和sprite等多个子store，并对外暴露统一的访问接口。组件利用Svelte的反应式特性（$state, $derived, $effect）实现自动更新。主要功能包括：当前feed和文章的管理、特定筛选条件（今日/周末/收藏/未读）的选择逻辑、定时内容更新调度、以及初始化时的数据加载控制。特别地，通过全局共享的`globalSharedScheduleUpdatingFuture`确保更新任务不被重复触发。",
    "responsibilities": [
      "作为应用主界面的核心状态容器，聚合多个子状态模块",
      "管理当前选中的feed和文章，支持基于虚拟feed ID的特殊筛选视图",
      "协调定时内容更新流程，避免并发执行",
      "处理应用启动时的初始化数据加载逻辑",
      "提供统一的API供UI层调用以改变状态或获取数据"
    ],
    "interfaces": [
      {
        "name": "IContext",
        "interface_type": "type",
        "visibility": "imported",
        "parameters": [],
        "return_type": null,
        "description": "定义上下文对象的结构，用于在store间传递共享状态"
      },
      {
        "name": "createStore",
        "interface_type": "function",
        "visibility": "exported",
        "parameters": [],
        "return_type": "object",
        "description": "工厂函数，创建并返回一个新的store实例，包含所有子模块和操作方法"
      }
    ],
    "dependencies": [
      {
        "name": "Article",
        "path": "$lib/types/article",
        "is_external": false,
        "line_number": 1,
        "dependency_type": "type",
        "version": null
      },
      {
        "name": "featuresApi",
        "path": "$lib/hybrid-apis/feed/impl",
        "is_external": false,
        "line_number": 4,
        "dependency_type": "variable",
        "version": null
      },
      {
        "name": "isRecentFamilyFeed",
        "path": "$lib/hybrid-apis/feed/impl",
        "is_external": false,
        "line_number": 5,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "isSpecifyFeed",
        "path": "$lib/hybrid-apis/feed/impl",
        "is_external": false,
        "line_number": 6,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "SPECIFY_FEED_IDSET",
        "path": "$lib/hybrid-apis/feed/impl",
        "is_external": false,
        "line_number": 7,
        "dependency_type": "constant",
        "version": null
      },
      {
        "name": "createArticles",
        "path": "./articles/index.svelte",
        "is_external": false,
        "line_number": 8,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "createTasks",
        "path": "./tasks.svelte",
        "is_external": false,
        "line_number": 9,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "createFeeds",
        "path": "./feeds.svelte",
        "is_external": false,
        "line_number": 10,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "createReader",
        "path": "./reader.svelte",
        "is_external": false,
        "line_number": 11,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "createSprite",
        "path": "./sprite.svelte",
        "is_external": false,
        "line_number": 12,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "currentDateText",
        "path": "$lib/utils/date",
        "is_external": false,
        "line_number": 13,
        "dependency_type": "function",
        "version": null
      },
      {
        "name": "IContext",
        "path": "./context",
        "is_external": false,
        "line_number": 14,
        "dependency_type": "type",
        "version": null
      }
    ],
    "complexity_metrics": {
      "cyclomatic_complexity": 14.0,
      "lines_of_code": 203,
      "number_of_functions": 13,
      "number_of_classes": 0,
      "depth_of_inheritance": 0,
      "coupling_factor": 0.5625,
      "cohesion_score": 0.78
    }
  },
  "timestamp": 1759024182,
  "prompt_hash": "e94fa7de235161815ab4279639df6a33",
  "token_usage": {
    "input_tokens": 1821,
    "output_tokens": 1154,
    "total_tokens": 2975
  },
  "model_name": null
}