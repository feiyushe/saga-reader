{
  "data": {
    "code_dossier": {
      "name": "launcher.rs",
      "file_path": "app/src-tauri/src/daemon/launcher.rs",
      "code_purpose": "specificfeature",
      "importance_score": 0.8,
      "description": "负责守护进程的启动逻辑，包含带错误忽略的启动和标准启动两种模式。",
      "functions": [
        "launch_ignore_error",
        "launch"
      ],
      "interfaces": [
        "launch_ignore_error",
        "launch"
      ]
    },
    "detailed_description": "该组件实现了守护进程（daemon）的启动功能，主要通过调用当前可执行文件并传递参数来启动后台服务。它使用文件锁机制防止重复启动，确保同一时间只有一个实例运行。launch函数是核心逻辑，先获取锁路径，尝试加锁，若已锁定则认为守护进程已在运行；否则释放锁并启动新进程。launch_ignore_error是对launch的安全封装，捕获所有错误并记录日志而不中断调用者。",
    "responsibilities": [
      "管理守护进程的启动流程",
      "通过文件锁防止守护进程重复启动",
      "提供静默失败的安全启动接口",
      "记录守护进程生命周期的关键事件日志"
    ],
    "interfaces": [
      {
        "name": "launch",
        "interface_type": "function",
        "visibility": "public",
        "parameters": [
          {
            "name": "host_arg",
            "param_type": "&str",
            "is_optional": false,
            "description": "传递给守护进程的主机参数"
          },
          {
            "name": "locker_monitor_name",
            "param_type": "&str",
            "is_optional": false,
            "description": "用于生成锁文件路径的标识名"
          }
        ],
        "return_type": "anyhow::Result<()>",
        "description": "标准启动方法，成功返回Ok，失败返回错误"
      },
      {
        "name": "launch_ignore_error",
        "interface_type": "function",
        "visibility": "public",
        "parameters": [
          {
            "name": "host_arg",
            "param_type": "&str",
            "is_optional": false,
            "description": "传递给守护进程的主机参数"
          },
          {
            "name": "locker_monitor_name",
            "param_type": "&str",
            "is_optional": false,
            "description": "用于生成锁文件路径的标识名"
          }
        ],
        "return_type": "()",
        "description": "安全启动方法，内部处理所有错误并记录日志"
      }
    ],
    "dependencies": [
      {
        "name": "std::env",
        "path": "std::env",
        "is_external": false,
        "line_number": 1,
        "dependency_type": "standard_library",
        "version": null
      },
      {
        "name": "std::process::Command",
        "path": "std::process::Command",
        "is_external": false,
        "line_number": 2,
        "dependency_type": "standard_library",
        "version": null
      },
      {
        "name": "fslock::LockFile",
        "path": "fslock",
        "is_external": true,
        "line_number": 4,
        "dependency_type": "external_crate",
        "version": null
      },
      {
        "name": "spdlog",
        "path": "spdlog",
        "is_external": true,
        "line_number": 5,
        "dependency_type": "external_crate",
        "version": null
      },
      {
        "name": "crate::daemon::locks::get_lock_path",
        "path": "crate::daemon::locks",
        "is_external": false,
        "line_number": 7,
        "dependency_type": "internal_module",
        "version": null
      }
    ],
    "complexity_metrics": {
      "cyclomatic_complexity": 3.0,
      "lines_of_code": 41,
      "number_of_functions": 2,
      "number_of_classes": 0,
      "depth_of_inheritance": 0,
      "coupling_factor": 0.56,
      "cohesion_score": 0.85
    }
  },
  "timestamp": 1758805679,
  "prompt_hash": "88b1de4cfa45a27fbd0f96d11fb12a14",
  "token_usage": {
    "input_tokens": 795,
    "output_tokens": 930,
    "total_tokens": 1725
  },
  "model_name": null
}